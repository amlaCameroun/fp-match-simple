# fp-match-simple

BibliothÃ¨que permettant de communiquer avec le module de comparaison des empreintes digitales

## Requirement

You need **php version >=7** to use this library

## Installation

```bash
composer require amla-cameroun/fp-match-simple
```

## Usage

All features usage are disponible in the Web test Demo

### Configuration

```php
use AmlaCameroun\FPMatchSimple\Core\FPServerAPI;

$configs = [
        'base_url' => 'http://fp-server-base-url.com',
        'auth_key' => 'xxxxx-xxxxx-xxxxx-xxxxx',
        'time_out' => 10,
        'cert_path' => '',
    ];
FPServerAPI::setConfigs($configs);
```

### Add user's identity to the database

```php
use AmlaCameroun\FPMatchSimple\Core\Identity;

$id = 1;
$fingerprints = [
    "AwFZEnoA//7//vA+wA6AAoAAAAAAAAAAAAAAAAAAgACAAIAAgACAAgAAAAAAAAAAAAAAAAAAAAAbE08eU5lFvhgcJX5xHAf+br8K/kGOQJ88F+zfJJgOn2OnyZ9eswp/PDPhv0W8S79EwuJXSiaJ3UC44j1CKwubPSmL+UMlSrMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBWhF5AP/+//7h/gD+AB4ADgAGAAYABgAGAAYABgAGAAYABgAGAA4AAAAAAAAAAAAAAAAAAAAAPBvF3lieh55nMwjeWMEKfiiQwH8Nmg5/JJpsn0yqSV8ltKHfSDWKPyq8Ih8wPwv/Ji3LuysuyzsmooGVMykJtSekThIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=",
    "AwFZEnoA//7//vA+wA6AAoAAAAAAAAAAAAAAAAAAgACAAIAAgACAAgAAAAAAAAAAAAAAAAAAAAAbE08eU5lFvhgcJX5xHAf+br8K/kGOQJ88F+zfJJgOn2OnyZ9eswp/PDPhv0W8S79EwuJXSiaJ3UC44j1CKwubPSmL+UMlSrMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBWhF5AP/+//7h/gD+AB4ADgAGAAYABgAGAAYABgAGAAYABgAGAA4AAAAAAAAAAAAAAAAAAAAAPBvF3lieh55nMwjeWMEKfiiQwH8Nmg5/JJpsn0yqSV8ltKHfSDWKPyq8Ih8wPwv/Ji3LuysuyzsmooGVMykJtSekThIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="
];

$identity = new Identity($id, $fingerprints);
$identity->synchronize();
echo sprintf('status=SUCCESS time=%ss', $identity->getSyncTime());
```
Outputs:

```bash
status=SUCCESS time=0s
```

### Add multiples identities to the database

```php
use AmlaCameroun\FPMatchSimple\Core\Identity;

$data = [
    [
        "id": 1,
        "fps": [
            "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"
        ]
    ],
    [
        "id": 2,
        "fps": [
            "AwFZEnoA//7//vA+wA6AAoAAAAAAAAAAAAAAAAAAgACAAIAAgACAAgAAAAAAAAAAAAAAAAAAAAAbE08eU5lFvhgcJX5xHAf+br8K/kGOQJ88F+zfJJgOn2OnyZ9eswp/PDPhv0W8S79EwuJXSiaJ3UC44j1CKwubPSmL+UMlSrMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBWhF5AP/+//7h/gD+AB4ADgAGAAYABgAGAAYABgAGAAYABgAGAA4AAAAAAAAAAAAAAAAAAAAAPBvF3lieh55nMwjeWMEKfiiQwH8Nmg5/JJpsn0yqSV8ltKHfSDWKPyq8Ih8wPwv/Ji3LuysuyzsmooGVMykJtSekThIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="
        ]
    ]
]

foreach ($data as $item) {
    $identity = new Identity($item['id'], $item['fps']);
    array_push($identities, $identity);
}
$time = Identity::synchronizeMultiples($identities);
echo sprintf('status=SUCCESS time=%ss', $time);
```
Outputs:

```bash
status=SUCCESS time=0s
```

### Search user

```php
use AmlaCameroun\FPMatchSimple\Core\Identity;

$fingerPrint = "AwFZEnoA//7//vA+wA6AAoAAAAAAAAAAAAAAAAAAgACAAIAAgACAAgAAAAAAAAAAAAAAAAAAAAAbE08eU5lFvhgcJX5xHAf+br8K/kGOQJ88F+zfJJgOn2OnyZ9eswp/PDPhv0W8S79EwuJXSiaJ3UC44j1CKwubPSmL+UMlSrMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBWhF5AP/+//7h/gD+AB4ADgAGAAYABgAGAAYABgAGAAYABgAGAA4AAAAAAAAAAAAAAAAAAAAAPBvF3lieh55nMwjeWMEKfiiQwH8Nmg5/JJpsn0yqSV8ltKHfSDWKPyq8Ih8wPwv/Ji3LuysuyzsmooGVMykJtSekThIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=";
$result = Identity::find($fingerPrint);
if ($result->getId() === null) {
    echo sprintf('status=NOT FOUND time=%ss', $result->getTime());
} else {
    echo sprintf('status=SUCCESS time=%ss userID=%s matching_percentage=%s%%', $result->getTime(), $result->getId(), $result->getPercentage());
}
```
Outputs:

```bash
status=SUCCESS time=0s userID=1 matching_percentage=100%
```

### Remove user from database

```php
use AmlaCameroun\FPMatchSimple\Core\Identity;

$userId = 1;
$time = Identity::forget($userId);
echo sprintf('status=SUCCESS time=%ss', $time);
```
Outputs:

```bash
status=SUCCESS time=0s
```

### Clear database

```php
use AmlaCameroun\FPMatchSimple\Core\Identity;

$time = Identity::clearDB();
echo sprintf('status=SUCCESS time=%ss', $time);
```
Outputs:

```bash
status=SUCCESS time=0s
```